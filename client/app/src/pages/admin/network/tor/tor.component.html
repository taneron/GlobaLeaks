@if (networkData) {
  <div class="form-group">
    <div class="input-group">
      <span class="input-group-prepend">
        <span class="input-group-text rounded-end-0">{{ 'Tor Onion Service' | translate }}</span>
      </span>
      <label for="tor-onionservice" class="visually-hidden">{{ 'Tor Onion Service address' | translate }}</label>
      <input id="tor-onionservice" name="onionservice" class="form-control" type="text" [value]="networkData.onionservice" disabled />
      <span class="input-group-append">
        <button class="btn btn-danger rounded-start-0 m-0" [disabled]="torOnionResetInProgress"
          (click)="resetOnionPrivateKey()">
          <i class="fas fa-arrows-rotate"></i>
          <span>{{ 'Regenerate' | translate }}</span>
        </button>
      </span>
    </div>
  </div>
  <div class="card card-default">
    <div class="card-body">
      <form #adminNetForm="ngForm">
        <div class="row">
          <div class="col-md-12">
            @if (nodeResolver.dataModel.root_tenant) {
              <div class="form-group">
                <input id="anonymize-outgoing-connections" class="form-check-input" [(ngModel)]="networkData.anonymize_outgoing_connections"
                  name="anonymize_outgoing_connections" type="checkbox">
                <label for="anonymize-outgoing-connections">{{ 'Anonymize outgoing connections' | translate }}</label>
              </div>
            }
            <div class="form-group">
              <input id="reachable-via-web" class="form-check-input" [(ngModel)]="networkData.reachable_via_web" name="reachable_via_web" type="checkbox">
              <label for="reachable-via-web">{{ 'Let the platform be reachable without Tor' | translate }}</label>
            </div>
            @if (networkData.reachable_via_web) {
              <div>
                <div class="form-group">
                  <label>{{ 'Roles enabled to use the platform without Tor' | translate }}</label>
                </div>
                <table class="table table-bordered">
                  <thead>
                    <th>{{ 'Role' | translate }}</th>
                    <th>{{ 'Enabled' | translate }}</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td><label for="https-admin">{{ 'Admin' | translate }}</label></td>
                      <td>
                        <input id="https-admin" class="form-check-input" [(ngModel)]="networkData.https_admin" name="https_admin"
                          type="checkbox">
                      </td>
                    </tr>
                    <tr>
                      <td><label for="https-analyst">{{ 'Analyst' | translate }}</label></td>
                      <td>
                        <input id="https-analyst" class="form-check-input" [(ngModel)]="networkData.https_analyst" name="https_analyst"
                          type="checkbox">
                      </td>
                    </tr>
                    <tr>
                      <td><label for="https-custodian">{{ 'Custodian' | translate }}</label></td>
                      <td>
                        <input id="https-custodian" class="form-check-input" [(ngModel)]="networkData.https_custodian" name="https_custodian"
                          type="checkbox">
                      </td>
                    </tr>
                    <tr>
                      <td><label for="https-receiver">{{ 'Recipient' | translate }}</label></td>
                      <td>
                        <input id="https-receiver" class="form-check-input" [(ngModel)]="networkData.https_receiver" name="https_receiver"
                          type="checkbox">
                      </td>
                    </tr>
                    <tr>
                      <td><label for="https-whistleblower">{{ 'Whistleblower' | translate }}</label></td>
                      <td>
                        <input id="https-whistleblower" class="form-check-input" [(ngModel)]="networkData.https_whistleblower"
                          name="https_whistleblower" type="checkbox">
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            }
          </div>
        </div>
        <hr />
        <div class="row">
          <div class="col-md-6">
            <button class="btn btn-primary" [disabled]="adminNetForm.invalid"
              (click)="updateTor(networkData)" type="submit">
              <i class="fas fa-check"></i>
              <span>{{ 'Save' | translate }}</span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
}